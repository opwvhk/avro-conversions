![Build Status](https://github.com/opwvhk/avro-conversions/workflows/Java%20CI%20with%20Maven/badge.svg)
[![License](https://img.shields.io/github/license/opwvhk/avro-conversions?color=brightgreen)](https://www.apache.org/licenses/LICENSE-2.0.html)
[![Maven Central Version](https://img.shields.io/maven-central/v/net.sf.opk/avro-conversions?color=brightgreen)](https://maven-badges.herokuapp.com/maven-central/net.sf.opk/avro-conversions)

Avro Conversions
================

Provides parsers to read various formats as Avro records (currently JSON and XML), as well as tools
to manipulate and/or describe schemas. The latter includes the conversion of XML Schema definitions
(XSD) and JSON Schema into Avro schemas.


Documentation
-------------

The documentation is split into two parts. The impatient among us can start with the "Quickstart"
section below. For the others, there is [more elaborate documentation](doc/index.md).


Quickstart
----------

Want to jump right in? Here's a simple example to readan Avro schema, JSON schema, and JSON file,
and parse the latter using the first two:

```java
import opwvhk.avro.SchemaManipulator;
import opwvhk.avro.json.JsonAsAvroParser;
import org.apache.avro.Schema;
import org.apache.avro.generic.GenericRecord;

class Example {
	public static void main(String[] args) throws Exception {
		// Expected are 3 arguments:
		// * the location of an Avro schema file
		// * the location of an JSON schema file
		// * the location of a JSON file

		StringBuilder buffer = new StringBuilder();
		// Read an Avro schema; other methods can convert an XSD or JSON schema.
		Schema readSchema = SchemaManipulator.startFromAvro(new URL(args[0]))
				// By default, renaming fields/schemata will also add the old name as an alias.
				.renameWithoutAliases()
				.renameField("newName", "path", "to", "field")
				.renameSchema("NewName", "OldName")
				.alsoDocumentAsMarkdownTable(buffer)
				.finish();
		// Print the schema as a Markdown table
		System.out.println(buffer);

		// Create a parser that reads JSON, validated according to the JSON schema, into Avro
		// records using a read schema.
		GenericData model = GenericData.get();
		URL jsonSchemaLocation = new URL(args[1]);
		JsonAsAvroParser parser = new JsonAsAvroParser(jsonSchemaLocation, readSchema, model);

		// The record type depends on the class generated by GenericData.get() (you can also use SpecificData or ReflectiveData).
		GenericRecord record = parser.parse(new URL(args[2]));
		System.out.println(record);
	}
}
```

Contributing âœ¨
---------------

<!--
TODO: uncomment when there are multiple committers
A special thank you to all who contributed! All contributions are sincerely appreciated.

[![Contributors](https://contrib.rocks/image?repo=opwvhk/avro-conversions)](https://github.com/opwvhk/avro-conversions/graphs/contributors)
-->

Are you interested in contributing? These links may be of interest:

* [Contributing Guidelines](CONTRIBUTING.md)
* [Good First Issues](https://github.com/opwvhk/avro-conversions/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+issue%22)
